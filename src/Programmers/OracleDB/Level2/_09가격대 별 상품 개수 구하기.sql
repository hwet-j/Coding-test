SELECT PRICE_GROUP, COUNT(PRICE_GROUP) PRODUCTS
FROM (SELECT CASE
WHEN (PRICE BETWEEN 0 AND 9999) THEN 0
WHEN (PRICE BETWEEN 10000 AND 19999) THEN 10000
WHEN (PRICE BETWEEN 20000 AND 29999) THEN 20000
WHEN (PRICE BETWEEN 30000 AND 39999) THEN 30000
WHEN (PRICE BETWEEN 40000 AND 49999) THEN 40000
WHEN (PRICE BETWEEN 50000 AND 59999) THEN 50000
WHEN (PRICE BETWEEN 60000 AND 69999) THEN 60000
WHEN (PRICE BETWEEN 70000 AND 79999) THEN 70000
WHEN (PRICE BETWEEN 80000 AND 89999) THEN 80000
WHEN (PRICE BETWEEN 90000 AND 99999) THEN 90000
END AS PRICE_GROUP, PRICE
FROM PRODUCT)
GROUP BY PRICE_GROUP
ORDER BY PRICE_GROUP


/* 다른사람 풀이
SELECT TRUNC(PRICE,-4) AS PRICE_GROUP, COUNT(*) AS PRODUCTS
FROM PRODUCT
GROUP BY TRUNC(PRICE,-4)
ORDER BY PRICE_GROUP
*/

/*
풀이를 하는데 이게 맞나 싶었던 문제.

TRUNC - > 시간, 숫자를 잘라주는 명령어이다.
예시) 단순 예시임
-- 숫자 자르기
SELECT 1234.567 AS 주어진수,
       TRUNC(1234.567) AS 소수점절사,
       TRUNC(1234.567, '1') AS 소수점첫째자리절사,
       TRUNC(1234.567, '2') AS 소수점둘째자리절사,
       TRUNC(1234.567, '-1') AS 1단위절사,
       TRUNC(1234.567, '-2') AS 10단위절사,
       TRUNC(1234.567, '-3') AS 100단위절사
FROM DUAL;

==> 말그대로 잘라내기 때문에 반올림, 올림은 하지 않는다.
소수점절사 = 1234
소수점첫째자리절사 = 1234.5
소수점둘째자리절사 = 1234.56
1단위절사 = 1230
10단위절사 = 1200
100단위절사 = 1000

-- 시간 자르기
SELECT SYSDATE  AS 현재시간,
       TRUNC(SYSDATE) AS 시간절사,
       TRUNC(SYSDATE, 'DD') AS 시간절사2, --TRUNC(SYSDATE)와 동일
       TRUNC(SYSDATE, 'HH24') AS 분초자르기,
       TRUNC(SYSDATE, 'MI') AS 초자르기,
       TRUNC(SYSDATE, 'YEAR') AS 월일초기화, -- TRUNC(SYSDATE, 'YYYY')와 동일
       TRUNC(SYSDATE, 'MM') AS 일초기화, --TRUNC(SYSDATE, 'MONTH')와 동일
       TRUNC(SYSDATE, 'DAY') AS 요일초기화 --해당 주의 일요일로 초기화 (일요일이 주의 시작)
FROM DUAL;

현재시간 = 2023-06-08 오후 7:12:34
시간절사 = 2023-06-08
시간절사2 = 2023-06-08
분초자르기 = 2023-06-08 오후 7:00:00
초자르기 = 2023-06-08 오후 7:12:00
월일초기화 = 2023-01-01
일초기화 = 2023-06-01
요일초기화 = 2023-06-04
*/
